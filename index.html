<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>신의 손 v5.0 - 1211회 (9번 조건 정밀수정)</title>
    <style>
        body { background-color: #000; color: #fff; font-family: 'Malgun Gothic', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .outer-border { border: 4px solid #ffd700; border-radius: 40px; padding: 12px; width: 95%; max-width: 420px; box-shadow: 0 0 30px rgba(255, 215, 0, 0.6); }
        .inner-container { border: 2px solid #ffd700; border-radius: 32px; padding: 40px 25px; text-align: center; background: #000; }
        .title { color: #ffd700; font-size: 50px; font-weight: 900; margin-bottom: 5px; letter-spacing: 10px; }
        .btn-main { width: 100%; height: 80px; border-radius: 25px; border: none; font-size: 22px; font-weight: 900; cursor: pointer; background: linear-gradient(to bottom, #fdf24d, #b8a000); color: #000; margin-bottom: 15px; }
        .log-window { background-color: #050505; border: 2px solid #333; border-radius: 25px; height: 420px; padding: 20px; text-align: left; overflow-y: auto; }
        .log-entry { color: #ffd700; font-size: 14px; margin-bottom: 12px; border-bottom: 1px solid #1a1a1a; padding-bottom: 8px; }
        .ball { display: inline-block; width: 30px; height: 30px; background: linear-gradient(135deg, #ffd700, #b8a000); color: #000; border-radius: 50%; text-align: center; line-height: 30px; font-weight: bold; margin-right: 4px; }
        .tag { font-size: 11px; padding: 2px 6px; border-radius: 4px; background: #444; color: #ffd700; margin-right: 5px; }
    </style>
</head>
<body>
<div class="outer-border">
    <div class="inner-container">
        <div class="title">신 의 손</div>
        <p style="color:#ff4500; font-weight:bold;">1211회: 9번(보너스1+미출2) / 10번(빈출3+미출2)</p>
        <button class="btn-main" onclick="generate()">10조합 순차 생성 가동</button>
        <div class="log-window" id="logs"></div>
    </div>
</div>

<script>
    // 최신 데이터 1210회 기준
    const rawData = [[1210,1,7,9,17,27,38,31],[1209,2,17,20,35,37,39,24],[1208,6,27,30,36,38,42,25],[1207,10,22,24,27,38,45,11],[1206,1,3,17,26,27,42,23],[1205,1,4,16,23,31,41,2],[1204,8,16,28,30,31,44,27],[1203,3,6,18,29,35,39,24],[1202,5,12,21,33,37,40,7],[1201,7,9,24,27,35,36,37]];

    function getAC(c) {
        let d = new Set();
        for(let i=0; i<6; i++) for(let j=i+1; j<6; j++) d.add(Math.abs(c[i]-c[j]));
        return d.size - 5;
    }

    function generate() {
        const logs = document.getElementById('logs');
        logs.innerHTML = '<div class="log-entry">▶ 분석 엔진 가동 중...</div>';
        
        const counts = {};
        rawData.forEach(r => r.slice(1,7).forEach(n => counts[n] = (counts[n]||0)+1));
        const core = Object.entries(counts).sort((a,b)=>b[1]-a[1]).slice(0,5).map(v=>Number(v[0]));
        const bn1 = 31; // 1210회 보너스 번호

        const recentNums = new Set();
        rawData.forEach(r => r.slice(1,8).forEach(n => recentNums.add(n)));
        const missing = Array.from({length:45},(_,i)=>i+1).filter(n => !recentNums.has(n));
        const normal = Array.from({length:45},(_,i)=>i+1).filter(n => recentNums.has(n));

        let currentStep = 1; // 1번부터 10번까지 순서대로 채우기 위한 변수
        let failSafe = 0;

        while(currentStep <= 10 && failSafe < 50000) {
            failSafe++;
            let c = [];
            
            // 각 번호대별 특화 생성 (먹통 방지 및 순서 강제)
            if (currentStep <= 7) { // 안정형: 미출수 0개
                let tempNormal = [...normal];
                for(let i=0; i<6; i++) c.push(tempNormal.splice(Math.floor(Math.random()*tempNormal.length),1)[0]);
            } else if (currentStep === 8) { // 8번: 보너스1 + 미출1
                c.push(bn1);
                c.push(missing[Math.floor(Math.random()*missing.length)]);
                let tempNormal = [...normal].filter(n => n!==bn1);
                for(let i=0; i<4; i++) c.push(tempNormal.splice(Math.floor(Math.random()*tempNormal.length),1)[0]);
            } else if (currentStep === 9) { // 9번: 보너스1 + 미출2 (사용자 요청 조건)
                c.push(bn1);
                let tempMissing = [...missing];
                c.push(tempMissing.splice(Math.floor(Math.random()*tempMissing.length),1)[0]);
                c.push(tempMissing.splice(Math.floor(Math.random()*tempMissing.length),1)[0]);
                let tempNormal = [...normal].filter(n => n!==bn1);
                for(let i=0; i<3; i++) c.push(tempNormal.splice(Math.floor(Math.random()*tempNormal.length),1)[0]);
            } else if (currentStep === 10) { // 10번: 빈출3 + 미출2 (사용자 요청 조건)
                let tempCore = [...core];
                for(let i=0; i<3; i++) c.push(tempCore.splice(Math.floor(Math.random()*tempCore.length),1)[0]);
                let tempMissing = [...missing];
                c.push(tempMissing.splice(Math.floor(Math.random()*tempMissing.length),1)[0]);
                c.push(tempMissing.splice(Math.floor(Math.random()*tempMissing.length),1)[0]);
                let others = Array.from({length:45},(_,i)=>i+1).filter(n => !c.includes(n));
                c.push(others[Math.floor(Math.random()*others.length)]);
            }

            c.sort((a,b)=>a-b);
            const ac = getAC(c);
            const sum = c.reduce((a,b)=>a+b,0);
            const mCount = c.filter(n => missing.includes(n)).length;
            const coreCount = c.filter(n => core.includes(n)).length;

            let isOk = false;
            if (ac >= 6 && ac <= 9 && sum >= 100 && sum <= 170) {
                if (currentStep <= 7 && mCount === 0) {
                    if (currentStep === 5 && c.includes(bn1)) isOk = true;
                    else if (currentStep <= 2 && coreCount >= 2) isOk = true;
                    else if (![1,2,5].includes(currentStep)) isOk = true;
                } 
                else if (currentStep === 8 && c.includes(bn1) && mCount === 1) isOk = true;
                else if (currentStep === 9 && c.includes(bn1) && mCount === 2) isOk = true;
                else if (currentStep === 10 && coreCount >= 3 && mCount === 2) isOk = true;
            }

            if (isOk) {
                if(currentStep === 1) logs.innerHTML = ''; // 첫 조합 생성 시 안내 문구 삭제
                logs.innerHTML += `<div class="log-entry"><span class="tag">#${currentStep}</span> ${c.map(n=>`<span class="ball">${n}</span>`).join('')}</div>`;
                currentStep++; // ★중요: 성공해야만 다음 번호로 넘어감
            }
        }
    }
</script>
</body>
</html>
