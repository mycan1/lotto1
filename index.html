<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì‹ ì˜ ì† v5.2 - ë¯¸ì¶œìˆ˜ ì§‘ì¤‘ ì €ê²©</title>
    <style>
        body { background-color: #000; color: #ffd700; font-family: 'Malgun Gothic', sans-serif; text-align: center; padding: 20px; margin: 0; }
        .outer-border { border: 4px solid #ffd700; border-radius: 40px; padding: 10px; max-width: 420px; margin: 0 auto; box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); }
        .inner-container { border: 2px solid #ffd700; border-radius: 32px; padding: 30px 20px; background: #0c0c0c; }
        h1 { font-size: 45px; font-weight: 900; margin: 0; letter-spacing: 8px; cursor: pointer; }
        .target-box { color: #ff4500; font-size: 19px; font-weight: 900; margin: 20px 0; background: #1a1a1a; padding: 10px; border-radius: 10px; border: 2px solid #ff4500; line-height: 1.4; }
        .btn-main { width: 100%; height: 70px; background: linear-gradient(to bottom, #fdf24d, #b8a000); border: none; border-radius: 20px; font-size: 20px; font-weight: 900; cursor: pointer; margin-bottom: 20px; color: #000; }
        #console { background-color: #050505; border: 2px solid #333; border-radius: 20px; height: 450px; padding: 15px; text-align: left; overflow-y: auto; color: #ffd700; font-size: 14px; line-height: 1.8; }
        .ball { display: inline-block; width: 28px; height: 28px; background: #ffd700; color: #000; border-radius: 50%; text-align: center; line-height: 28px; font-weight: bold; margin-right: 4px; font-size: 13px; }
        .tag { font-size: 11px; padding: 2px 6px; border-radius: 4px; background: #333; color: #fff; margin-right: 5px; }
        .tag-cold { background: #ff4500 !important; } 
    </style>
</head>
<body>
<div class="outer-border">
    <div class="inner-container">
        <h1 onclick="location.reload()">ì‹  ì˜ ì†</h1>
        <div class="target-box">ğŸ¯ 1211íšŒ ë¯¸ì¶œìˆ˜ ì§‘ì¤‘ ëª¨ë“œ<br>(8ë²ˆ:1ê°œ / 9ë²ˆ:2ê°œ / 10ë²ˆ:1ê°œ)</div>
        <button class="btn-main" onclick="process()">ë¶„ì„ ì—”ì§„ 10ì¡°í•© ê°€ë™</button>
        <div id="console">â–¶ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ.</div>
    </div>
</div>

<script>
    // 1210íšŒì°¨ê¹Œì§€ì˜ ë°ì´í„° (ìˆ˜ì • ì—†ìŒ)
    const RAW_DATA = [
        [1210,1,7,9,17,27,38,31],[1209,2,17,20,35,37,39,24],[1208,6,27,30,36,38,42,25],[1207,10,22,24,27,38,45,11],
        [1206,1,3,17,26,27,42,23],[1205,1,4,16,23,31,41,2],[1204,8,16,28,30,31,44,27],[1203,3,6,18,29,35,39,24],
        [1202,5,12,21,33,37,40,7],[1201,7,9,24,27,35,36,37],[1200,1,2,4,16,20,32,45],[1199,16,24,25,30,31,32,7],
        [1198,26,30,33,38,39,41,21],[1197,1,5,7,26,28,43,30],[1196,8,12,15,29,40,45,14],[1195,3,15,27,33,34,36,37],
        [1194,3,13,15,24,33,37,2],[1193,6,9,16,19,24,28,17],[1192,10,16,23,36,39,40,11],[1191,1,4,11,12,20,41,2],
        [1190,7,9,19,23,26,45,33],[1189,9,19,29,35,37,38,31],[1188,3,4,12,19,22,27,9],[1187,5,13,26,29,37,40,42],
        [1186,2,8,13,16,23,28,35],[1185,6,17,22,28,29,32,38],[1184,14,16,23,25,31,37,42],[1183,4,15,17,23,27,36,31],
        [1182,1,13,21,25,28,31,22],[1181,8,10,14,20,33,41,28],[1180,6,12,18,37,40,41,3],[1179,3,16,18,24,40,44,21],
        [1178,5,6,11,27,43,44,17],[1177,3,7,15,16,19,43,21],[1176,7,9,11,21,30,35,29],[1175,3,4,6,8,32,42,31],
        [1174,8,11,14,17,36,39,22],[1173,1,5,18,20,30,35,3],[1172,7,9,24,40,42,44,45],[1171,3,6,7,11,12,17,19],
        [1170,3,13,28,34,38,42,25],[1169,5,12,24,26,39,42,20],[1168,9,21,24,30,33,37,29],[1167,8,23,31,35,39,40,24],
        [1166,14,23,25,27,29,42,16]
    ];

    let top12 = [], bonusOnlyHot = [], coldNumbers = [];

    function init() {
        // ìµœê·¼ 30íšŒì°¨ ë°ì´í„° ì¶”ì¶œ
        let r30 = RAW_DATA.slice(0, 30);
        let stats = {}, appearCount = {};
        
        // ì´ˆê¸°í™”
        for(let i=1; i<=45; i++) { 
            stats[i] = 0; 
            appearCount[i] = 0; 
        }

        // í†µê³„ ì§‘ê³„
        r30.forEach((d, idx) => { 
            for(let i=1; i<=6; i++) { // ë³´ë„ˆìŠ¤ ì œì™¸, ì •ë²ˆí˜¸ 6ê°œë§Œ ì²´í¬
                stats[d[i]] += (30-idx); 
                appearCount[d[i]]++;
            }
        });

        // ìƒìœ„ 12ìˆ˜ ì¶”ì¶œ
        top12 = Object.keys(stats).map(Number).sort((a,b) => stats[b] - stats[a]).slice(0, 12);
        
        // â˜…[ìˆ˜ì •ë¨] 30íšŒì°¨ ë¯¸ì¶œìˆ˜ ì¶”ì¶œ ë¡œì§ (countê°€ 0ì¸ ê²ƒ)
        coldNumbers = Object.keys(appearCount).filter(key => appearCount[key] === 0).map(Number);

        // ë³´ë„ˆìŠ¤ ìŠ¹ê²©ìˆ˜ ê³„ì‚° (ì •ë²ˆí˜¸ì—” ì•ˆ ë‚˜ì˜¤ê³  ë³´ë„ˆìŠ¤ë¡œë§Œ ë‚˜ì˜¨ ìˆ˜)
        let bOnly = {};
        r30.forEach((d, idx) => {
            let b = d[7];
            // ìƒìœ„ ë‹¹ì²¨ë²ˆí˜¸ì— í¬í•¨ë˜ì§€ ì•Šì•˜ë˜ ë²ˆí˜¸ì— ê°€ì¤‘ì¹˜
            if(!top12.includes(b)) bOnly[b] = (bOnly[b] || 0) + (30-idx);
        });
        bonusOnlyHot = Object.keys(bOnly).map(Number).sort((a,b) => bOnly[b] - bOnly[a]);
    }

    function getAC(arr) {
        let d = new Set();
        for(let i=0; i<6; i++) { for(let j=i+1; j<6; j++) d.add(Math.abs(arr[i]-arr[j])); }
        return d.size - 5;
    }

    function checkConsecutive(arr) {
        let s = [...arr].sort((a,b) => a-b);
        for(let i=0; i<4; i++) { if(s[i]+1 === s[i+1] && s[i+1]+1 === s[i+2]) return false; }
        return true;
    }

    function process() {
        const box = document.getElementById('console');
        box.innerHTML = `â–¶ ë¶„ì„ ì™„ë£Œ!<br><b>ë¯¸ì¶œìˆ˜(Total ${coldNumbers.length}ìˆ˜):</b> ${coldNumbers.join(', ') || 'ì—†ìŒ'}<br>----------------------------<br>`;
        
        let gen = 0, safety = 0;

        while(gen < 10 && safety < 500000) {
            safety++;
            let res = [], cur = gen + 1;
            let tempCold = [...coldNumbers]; // ë³µì‚¬í•´ì„œ ì‚¬ìš©

            // 1. ì „ëµì  ê³ ì •ìˆ˜ ë°°ì¹˜
            if(cur <= 3 && bonusOnlyHot.length >= cur) {
                res.push(bonusOnlyHot[cur-1]); 
            } 
            else if(cur === 8) {
                if(tempCold.length >= 1) res.push(tempCold[Math.floor(Math.random() * tempCold.length)]);
            }
            else if(cur === 9) {
                if(tempCold.length >= 2) {
                    // ì„œë¡œ ë‹¤ë¥¸ 2ê°œ ì¶”ì¶œ
                    let c1 = tempCold.splice(Math.floor(Math.random()*tempCold.length), 1)[0];
                    let c2 = tempCold.splice(Math.floor(Math.random()*tempCold.length), 1)[0];
                    res.push(c1, c2);
                } else if(tempCold.length === 1) {
                    res.push(tempCold[0]);
                }
            }
            else if(cur === 10) {
                if(tempCold.length >= 1) res.push(tempCold[Math.floor(Math.random() * tempCold.length)]);
            }

            // 2. ë‚˜ë¨¸ì§€ ë²ˆí˜¸ ì±„ìš°ê¸°
            // [ìˆ˜ì •] top12ë§Œ ê³ ì§‘í•˜ë©´ ë¯¸ì¶œìˆ˜ì™€ í•©ì³ì¡Œì„ ë•Œ ì¡°ê±´ ì¶©ì¡±ì´ ì•ˆë  ìˆ˜ ìˆìŒ.
            // ë”°ë¼ì„œ top12ë¥¼ ìš°ì„ í•˜ë˜, ëœë¤ ë²ˆí˜¸ë„ ì„ì–´ì„œ ìœ ì—°í•˜ê²Œ ì±„ì›€
            let pool = [...top12]; 
            
            while(res.length < 6) {
                let pick;
                // í’€(ë‹¹êµ¬)ì— ìˆ«ìê°€ ìˆê³ , í™•ë¥ ì ìœ¼ë¡œ(70%) ìƒìœ„ìˆ˜ë¥¼ ë½‘ìŒ
                if(pool.length > 0 && Math.random() < 0.7) {
                    let idx = Math.floor(Math.random() * pool.length);
                    pick = pool.splice(idx, 1)[0];
                } else {
                    // í’€ì´ ë¹„ì—ˆê±°ë‚˜ 30% í™•ë¥ ë¡œ ì™„ì „ ëœë¤ (ë‹¤ì–‘ì„± í™•ë³´)
                    pick = Math.floor(Math.random() * 45) + 1;
                }

                if(!res.includes(pick)) res.push(pick);
            }
            
            res.sort((a,b) => a-b);

            // 3. í•„í„°ë§ (í•©ê³„, AC, í™€ì§, ì—°ë²ˆ)
            const sum = res.reduce((a,b)=>a+b, 0);
            const ac = getAC(res);
            const odds = res.filter(n => n%2 !== 0).length;

            if(sum >= 100 && sum <= 180 && ac >= 6 && ac <= 10 && checkConsecutive(res) && odds > 0 && odds < 6) {
                gen++;
                
                // íƒœê·¸ ìƒì„± ë¡œì§
                let typeText = "ì•ˆì •";
                let typeClass = "";
                if(cur <= 3) typeText = "ìŠ¹ê²©";
                
                // ë¯¸ì¶œìˆ˜ê°€ ì‹¤ì œë¡œ í¬í•¨ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì—¬ íƒœê·¸ í‘œì‹œ
                let hasCold = res.some(r => coldNumbers.includes(r));
                if(cur >= 8 && hasCold) {
                    typeText = "ì €ê²©";
                    typeClass = "tag-cold";
                }

                const balls = res.map(n => {
                    // ë¯¸ì¶œìˆ˜ëŠ” ê³µ ìƒ‰ìƒì„ ë‹¤ë¥´ê²Œ í•˜ê±°ë‚˜(ì„ íƒ), ê·¸ëƒ¥ í‘œì‹œ
                    return `<span class="ball" ${coldNumbers.includes(n) ? 'style="border:2px solid #ff4500;"' : ''}>${n}</span>`
                }).join('');
                
                box.innerHTML += `<div><span class="tag ${typeClass}">${typeText}</span> #${gen} ${balls}</div>`;
            }
        }
    }
    window.onload = init;
</script>
</body>
</html>
